# Система управления компьютерным клубом

## Описание проекта
Система управления компьютерным клубом — это сервис, разработанный на Go с использованием gRPC, предназначенный для автоматизации и управления работой компьютерного клуба. Проект построен на принципах Чистой архитектуры (Clean Architecture) и включает ключевые компоненты, такие как логирование, кэширование с использованием Redis и административную панель.

## Функциональные возможности
- **Управление пользователями**: регистрация, аутентификация и управление учетными записями пользователей.
- **Управление сеансами**: контроль времени сеанса, отслеживание активности пользователей.
- **Биллинг и расчёт стоимости**: автоматический расчёт стоимости игрового времени и управление платежами.
- **gRPC API**: эффективный механизм взаимодействия между клиентами и сервером.
- **Кэширование с Redis**: ускорение работы сервиса за счёт хранения часто используемых данных в Redis.
- **Административная панель**: удобный интерфейс для управления работой клуба.
- **Логирование**: структурированное логирование для удобного мониторинга и отладки.

## Используемые технологии
- **Go**: основной язык программирования для бэкенд-части проекта.
- **gRPC**: высокопроизводительный RPC-фреймворк для связи между клиентами и сервером.
- **PostgreSQL**: основная реляционная база данных для хранения данных клуба.
- **Redis**: система кэширования для ускорения работы сервиса.
- **Docker**: контейнеризация сервиса для удобного развертывания.
- **Чистая архитектура**: разделение компонентов системы для обеспечения масштабируемости и удобства поддержки.

## Установка и запуск

### Требования
Перед установкой убедитесь, что у вас установлены следующие компоненты:
- **Go** (последняя версия)
- **Docker и Docker Compose**
- **PostgreSQL**
- **Redis**

### Инструкция по установке
1. **Клонируйте репозиторий:**
   ```sh
   git clone https://github.com/Donilwel/computer-club.git
   cd computer-club
   ```
2. **Соберите и запустите сервис с помощью Docker Compose:**
   ```sh
   docker-compose up --build
   ```
3. **Сервис gRPC будет запущен и готов к работе.**

## Использование

### Запуск сервиса локально (без Docker)
1. Запустите PostgreSQL и Redis.
2. Запустите сервис вручную:
   ```sh
   go run cmd/server/main.go
   ```
3. Используйте gRPC-клиент для взаимодействия с API.

### Основные gRPC-методы
Сервис предоставляет следующие методы для взаимодействия:

#### **Сервис пользователей**
##### `RegisterUser`
Регистрирует нового пользователя в системе.
- **Входные параметры:**
    - `username` (string) – имя пользователя.
    - `password` (string) – пароль пользователя.
- **Выходные параметры:**
    - `user_id` (int) – уникальный идентификатор пользователя.
    - `error` – возможная ошибка при регистрации.

##### `AuthenticateUser`
Позволяет пользователю войти в систему.
- **Входные параметры:**
    - `username` (string) – имя пользователя.
    - `password` (string) – пароль пользователя.
- **Выходные параметры:**
    - `token` (string) – токен для последующих запросов.
    - `error` – возможная ошибка при аутентификации.

#### **Сервис управления сеансами**
##### `StartSession`
Начинает игровой сеанс для пользователя.
- **Входные параметры:**
    - `user_id` (int) – идентификатор пользователя.
    - `computer_id` (int) – номер компьютера.
- **Выходные параметры:**
    - `session_id` (int) – идентификатор игрового сеанса.
    - `start_time` (timestamp) – время начала сеанса.
    - `error` – возможная ошибка при запуске сеанса.

##### `EndSession`
Завершает игровой сеанс пользователя.
- **Входные параметры:**
    - `session_id` (int) – идентификатор сеанса.
- **Выходные параметры:**
    - `duration` (int) – продолжительность сеанса в минутах.
    - `cost` (float) – итоговая стоимость сеанса.
    - `error` – возможная ошибка при завершении сеанса.

#### **Сервис биллинга**
##### `CalculateCost`
Рассчитывает стоимость игрового сеанса.
- **Входные параметры:**
    - `session_id` (int) – идентификатор сеанса.
- **Выходные параметры:**
    - `cost` (float) – стоимость игрового времени.
    - `error` – возможная ошибка при расчете стоимости.

##### `ProcessPayment`
Обрабатывает платеж за игровой сеанс.
- **Входные параметры:**
    - `user_id` (int) – идентификатор пользователя.
    - `amount` (float) – сумма платежа.
- **Выходные параметры:**
    - `payment_status` (string) – статус платежа (`success` или `failed`).
    - `error` – возможная ошибка при обработке платежа.

